#https://github.com/openai/openai-python

from dotenv import load_dotenv 
from openai import OpenAI
load_dotenv()

client = OpenAI()
systemMessage = """
你是一个熟悉中国紫微斗数理论的算命先生。你将遵从以下三个步骤提供信息总结。
1. 我将提供给你一段由triple quotes包裹的关于我紫微斗数星盘上十二宫的信息。请据此在h3 标题\"星盘总结\"下用两三句话总结我的星盘格局。总结内容既要包含积极正面的情况，也要用神秘委婉的语气阐述负面的情况。
2. 在提供星盘总结后，在h3标题\"星盘详解\"下提供具体的总结依据。
3. 在完成了对紫微斗数星盘的信息的总结与详解后，在h3标题\"修身意见\"下，针对我的负面情况给出合理、安全、健康的改进意见。

以下12行是紫微斗数星盘上的十二宫所代表的一个人的各种属性:
1.田宅宫: 田宅宫是表示收藏的宫位，它除了表示不动产，还表示星盘主人和家人之间的关系。古人非常重视 家宅安宁，所以会从田宅宫的情况来看星盘主人的福祸。一个和谐美满的家庭，当然会对人生有很大帮助，所以如果你田宅宫真的特别差，其实是可以考虑独居的。另外，田宅宫也表示了对财富的积累，这是因为田宅宫是财帛宫的财库 位。财帛宫旺但是田宅宫破掉，很可能星盘的主人赚钱很厉害，但是花钱也很厉害的人。这就是那种又会花钱，又会挣钱的类型。有的人财帛宫很弱，但是田宅宫很旺，那TA可能是一个懂得开源节流，很喜欢存钱的人。
2.仕途宫: 仕途宫是展示星盘主人的 做事态度 和对工作的态度。
3.交友宫: 显示的是自己的圈子和择友观，你喜欢和什么样的朋友相处，你交朋友的眼光如何，你的朋友是达官显贵多还是酒肉朋友多，主要就是看 仆役宫。
4.迁移宫: 迁移宫展现出来的特质，就是一种伪装，或者是包装。因为人是需要“伪装”来保护自己的。
5.福德宫: 福德宫代表的是星盘主人的思想
6.疾厄宫: 疾厄宫是管理星盘主人的身体的宫位，也就是体质。疾除了有病患的意思在里面，还有苦难，这是指的是身体物理层面的。
7.父母宫: 代表了星盘主人父母,代表了星盘主人的先天养分
8.财帛宫: 财帛宫展现出的是星盘主人对财务的态度，理财观念，物质欲望等等。财帛宫如果在星盘上表现很突出，代表的是星盘主人比较吃资源，需要比一般人更多的物质条件才能过得和一般人一样好，从而在理财和对赚钱机会的敏感度上会比普通人更好，这样才能满足自己的物质需求。
9.命宫: 命宫是决定星盘主人属性的宫位，它显示了你的个性偏向。但是，人的性格是立体的，命宫的个性只能说是星盘主人的本质。
10.兄弟宫: 兄弟宫主要看的是星盘主人和兄弟姊妹之间的相处模式。
11.夫妻宫: 夫妻宫是代表感情的宫位，它展示了星盘主人的择偶观和对感情的态度。
12.子女宫: 代表桃花的宫位是子女宫,这是由生育这件事情衍生而来。子女宫除了看子女和桃花以外，还能看和合作伙伴之间的情况。这是因为子女宫是官禄宫的仆役位，也就是工作上的伙伴。

关于星曜的理解
星曜在紫微斗数星盘上的作用是为每个宫赋予属性值的作用,可以理解为一个人在某一方面的初始属性值。当一个星曜或多个星曜的组合出现在一个宫中的时候，该星曜或多个星曜的组合的特质将影响代表着一个人某一方面属性的宫的属性值。
当多个星曜组合出现的时候，你需要重点参考星耀组合的影响而不是单个星曜的影响。
"""

assistantMessage = """
### 星盘总结
模型在这里总结我的星盘格局

### 星盘详解
模型在这里给出上述总结的详细依据

### 修身意见
模型在这里给出针对我的星盘格局中负面的情况的意见。
"""

userMessage = """
\"\"\"
1.田宅宫: 你的田宅宫主星有巨门。 巨门星在田宅宫，命主对家庭氛围要求较高，重视沟通，易与家人发生口舌之争。
田宅宫杂曜是红鸾。 红鸾星在田宅宫，命主家庭氛围和谐，生活环境舒适，家人关系融洽。

2.仕途宫: 你的仕途宫主星有廉贞。 廉贞星在仕途宫，命主在事业上注重自我表现，往往要求完美，适合从事细致的工作。
包含四化：廉贞化禄，依据最后的四化附录调整解读。
廉贞星和天相星在同一宫格。 廉贞天相在仕途宫，命主适合处理复杂的人际事务，工作上多受他人帮助。
你的仕途宫主星有天相。 天相星在仕途宫，命主在工作中表现得体，适合与人打交道的职业，重视团队合作。
天相星和廉贞星在同一宫格。 廉贞天相在仕途宫，命主适合处理复杂的人际事务，工作上多受他人帮助。

3.交友宫: 你的交友宫主星有天梁。 天梁星在交友宫，命主朋友多为正直之人，关系稳定，讲究互助。
交友宫辅星是天钺。 天钺星在交友宫，命主朋友多为温和之人，彼此信任，关系和谐。

4.迁移宫: 你的迁移宫主星有七杀。 七杀星在迁移宫，命主在外界表现出强烈的独立精神，敢于争取自身利益，但易与他人发生冲突。
迁移宫辅星是天马。 天马星在迁移宫，命主外出时有利于探索新机会，适合频繁出行。

5.福德宫: 你的福德宫主星有贪狼。 贪狼星在福德宫，命主精神生活丰富，享受娱乐与社交活动，易因外界干扰而浮躁。
福德宫辅星是左辅。 左辅星在福德宫，命主性格温和，重视内心的满足，易得知心好友。
福德宫辅星是文曲。 文曲星在福德宫，命主心态平和，精神生活充实，喜爱文艺活动。

6.疾厄宫: 你的疾厄宫主星有天同。 天同星在疾厄宫，命主身体健康较佳，但易因享乐导致体重增加或健康不均衡。
疾厄宫杂曜是天刑。 天刑星在疾厄宫，命主健康需多加注意，易受情绪影响，压力较大。

7.父母宫: 你的父母宫主星有太阴。 太阴星在父母宫，命主与父母关系亲密，父母对子女关心体贴，关系和睦。
擎羊星和铃星星在同一宫格。 父母关系中可能存在不和谐因素，建议适当沟通，增进理解，减少冲突。
父母宫辅星是擎羊。 擎羊星在父母宫，命主与父母关系直接，较为坦率，但需注意沟通方式。
父母宫辅星是铃星。 铃星在父母宫，命主与父母关系一般，彼此保留一定距离，较少深入沟通。
铃星星和擎羊星在同一宫格。 父母关系中可能存在不和谐因素，建议适当沟通，增进理解，减少冲突。
父母宫杂曜是咸池。 咸池星在父母宫，命主与父母关系较疏，注重独立生活，但关心父母。

8.财帛宫: 你的财帛宫主星有武曲。 武曲星在财帛宫，命主对于财富的积累十分重视，擅长理财，具备较强的经济观念。
包含四化：武曲化科，依据最后的四化附录调整解读。
财帛宫辅星是右弼。 右弼星在财帛宫，命主在财务上较为稳重，易得到他人资助，有助于财富积累。
财帛宫辅星是文昌。 文昌星在财帛宫，命主在财务上慎重，适合财务管理，财运稳定。

9.命宫: 你的命宫主星有紫微。 紫微星在命宫时，展现出强烈的领导气质和王者风范。命主拥有高度的控制欲和大局观，通常在人际关系中占据主导地位，给人一种不可轻易接近的距离感。
紫微星和天府星在同一宫格。 紫微天府在命宫时，命主具备天生的领导才能和宽厚的性格，擅长以温和的方式掌控局面，表现出不凡的组织能力与人际协调力，生活态度稳重而务实。
你的命宫主星有天府。 天府星在命宫，命主性情平和，性格稳重，有较强的包容心和责任感。
天府星和紫微星在同一宫格。 紫微天府在命宫时，命主具备天生的领导才能和宽厚的性格，擅长以温和的方式掌控局面，表现出不凡的组织能力与人际协调力，生活态度稳重而务实。
命宫辅星是禄存。 禄存星在命宫，命主务实可靠，重视实际利益，行事稳健，有聚财之能。

10.兄弟宫: 你的兄弟宫主星有天机。 天机星在兄弟宫，命主与兄弟姐妹沟通顺畅，彼此交流频繁，容易形成紧密的关系，但偶尔可能因思维方式不同产生分歧。
兄弟宫辅星是天魁。 天魁星在兄弟宫，命主与兄弟姐妹关系和睦，互相支持，有尊重兄长之情。
兄弟宫辅星是陀罗。 陀罗星在兄弟宫，命主与兄弟姐妹关系较复杂，彼此容易因小事发生纠纷。
兄弟宫辅星是火星。 火星在兄弟宫，命主与兄弟姐妹关系较为直接，有时易因冲动而发生矛盾。
兄弟宫杂曜是天姚。 天姚星在兄弟宫，命主与兄弟姐妹关系亲密，互动频繁，彼此关注支持。

11.夫妻宫: 你的夫妻宫主星有破军。 破军星在夫妻宫，命主在婚姻中追求新鲜感，喜欢有挑战性的关系，需注意关系的稳定性。
包含四化：破军化权，依据最后的四化附录调整解读。

12.子女宫: 你的子女宫主星有太阳。 太阳星在子女宫，命主对子女关爱有加，乐于提供支持，教育方式积极正向。
包含四化：太阳化忌，依据最后的四化附录调整解读。
子女宫辅星是地空。 地空星在子女宫，命主对子女要求不多，重视子女的独立性，与子女关系较平淡。
子女宫辅星是地劫。 地劫星在子女宫，命主对子女的教养过程较为艰辛，需要面对教育中的困难。
子女宫杂曜是天喜。 天喜星在子女宫，命主对子女关系良好，子女性格活泼，家庭气氛和乐融融。
\"\"\"
"""

print(f"systemMessage:{systemMessage}\n assistantMessage:{assistantMessage}\n userMessage:{userMessage}")

completion = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
        {"role": "system", "content": systemMessage},
        {"role": "user", "content": userMessage },
        {"role": "assistant", "content":assistantMessage}
    ],
    #max_completion_tokens=200
)

print(completion.choices[0].message.content)
